<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!--      
	This file is automatically generated by autoCode(https://git.oschina.net/durcframework/autoCode)
-->
<mapper namespace="com.info.back.dao.ISysUserBankCardDao">
	<resultMap id="queryResultMap" type="com.info.web.pojo.cspojo.SysUserBankCard">
		<result column="id" property="id" jdbcType="VARCHAR"/>
		<!-- 用户id -->
		<result column="user_id" property="userId" jdbcType="VARCHAR"/>
		<!-- 卡号 -->
		<result column="bank_card" property="bankCard" jdbcType="VARCHAR"/>
		<!-- 开户行 -->
		<result column="deposit_bank" property="depositBank" jdbcType="VARCHAR"/>
		<!-- 银行机构号 -->
		<result column="bank_institution_no" property="bankInstitutionNo" jdbcType="VARCHAR"/>
		<!-- 开户支行 -->
		<result column="branch_bank" property="branchBank" jdbcType="VARCHAR"/>
		<!-- 姓名 -->
		<result column="name" property="name" jdbcType="VARCHAR"/>
		<!-- 银行预留手机号 -->
		<result column="mobile" property="mobile" jdbcType="VARCHAR"/>
		<!-- 身份证 -->
		<result column="id_card" property="idCard" jdbcType="VARCHAR"/>
		<!-- 信用卡CVN -->
		<result column="cvn" property="cvn" jdbcType="VARCHAR"/>
		<!-- 代付总行代码 -->
		<result column="bank_code" property="bankCode" jdbcType="VARCHAR"/>
		<!-- 开户行城市代码 -->
		<result column="city_code" property="cityCode" jdbcType="VARCHAR"/>
		<!-- 开户行城市名称 -->
		<result column="city_name" property="cityName" jdbcType="VARCHAR"/>
	</resultMap>
	<select id="findUserId" parameterType="String" resultType="com.info.web.pojo.cspojo.SysUserBankCard">
		SELECT 
		c.`deposit_bank` as depositBank,
		c.`bank_card` as bankCard,
		c.`mobile` as mobile 
		FROM sys_user_bank_card c
		WHERE c.`user_id`=#{id}
	</select>
	
	<!-- 保存,保存不为NULL的字段 -->
	<insert id="saveNotNull" parameterType="com.info.web.pojo.cspojo.SysUserBankCard">
	<selectKey keyProperty="id" resultType="java.lang.String"
		order="BEFORE">
		select replace(uuid(),'-','') from dual
	</selectKey>
	INSERT INTO sys_user_bank_card 
		<trim prefix="(" suffix=")" suffixOverrides=","> 
			`id`,  
			<if test="userId != null">`user_id`,</if>  
			<if test="bankCard != null">`bank_card`,</if>  
			<if test="depositBank != null">`deposit_bank`,</if>  
			<if test="bankInstitutionNo != null">`bank_institution_no`,</if>  
			<if test="branchBank != null">`branch_bank`,</if>  
			<if test="name != null">`name`,</if>  
			<if test="mobile != null">`mobile`,</if>  
			<if test="idCard != null">`id_card`,</if>  
			<if test="cvn != null">`cvn`,</if>  
			<if test="bankCode != null">`bank_code`,</if>  
			<if test="cityCode != null">`city_code`,</if>  
			<if test="cityName != null">`city_name`,</if> 
		</trim>  
		<trim prefix="values (" suffix=")" suffixOverrides=","> 
			#{id,jdbcType=VARCHAR},
			<if test="userId != null">#{userId,jdbcType=VARCHAR},</if>  
			<if test="bankCard != null">#{bankCard,jdbcType=VARCHAR},</if>  
			<if test="depositBank != null">#{depositBank,jdbcType=VARCHAR},</if>  
			<if test="bankInstitutionNo != null">#{bankInstitutionNo,jdbcType=VARCHAR},</if>  
			<if test="branchBank != null">#{branchBank,jdbcType=VARCHAR},</if>  
			<if test="name != null">#{name,jdbcType=VARCHAR},</if>  
			<if test="mobile != null">#{mobile,jdbcType=VARCHAR},</if>  
			<if test="idCard != null">#{idCard,jdbcType=VARCHAR},</if>  
			<if test="cvn != null">#{cvn,jdbcType=VARCHAR},</if>  
			<if test="bankCode != null">#{bankCode,jdbcType=VARCHAR},</if>  
			<if test="cityCode != null">#{cityCode,jdbcType=VARCHAR},</if>  
			<if test="cityName != null">#{cityName,jdbcType=VARCHAR},</if> 
		</trim> 
	</insert>
	<!-- 更新不为NULL的字段 -->
	<update id="updateNotNull" parameterType="com.info.web.pojo.cspojo.SysUserBankCard">UPDATE sys_user_bank_card
		<set> 
			<if test="userId != null">user_id=#{userId,jdbcType=VARCHAR},</if>  
			<if test="bankCard != null">bank_card=#{bankCard,jdbcType=VARCHAR},</if>  
			<if test="depositBank != null">deposit_bank=#{depositBank,jdbcType=VARCHAR},</if>  
			<if test="bankInstitutionNo != null">bank_institution_no=#{bankInstitutionNo,jdbcType=VARCHAR},</if>  
			<if test="branchBank != null">branch_bank=#{branchBank,jdbcType=VARCHAR},</if>  
			<if test="name != null">name=#{name,jdbcType=VARCHAR},</if>  
			<if test="mobile != null">mobile=#{mobile,jdbcType=VARCHAR},</if>  
			<if test="idCard != null">id_card=#{idCard,jdbcType=VARCHAR},</if>  
			<if test="cvn != null">cvn=#{cvn,jdbcType=VARCHAR},</if>  
			<if test="bankCode != null">bank_code=#{bankCode,jdbcType=VARCHAR},</if>  
			<if test="cityCode != null">city_code=#{cityCode,jdbcType=VARCHAR},</if>  
			<if test="cityName != null">city_name=#{cityName,jdbcType=VARCHAR},</if> 
		</set> WHERE id = #{id,jdbcType=VARCHAR}
	</update>
	<!-- 根据主键获取单条记录 -->
	<select id="get" resultMap="queryResultMap" parameterType="com.info.web.pojo.cspojo.SysUserBankCard">SELECT t.id , t.user_id , t.bank_card , t.deposit_bank , t.bank_institution_no , t.branch_bank , t.name , t.mobile , t.id_card , t.cvn , t.bank_code , t.city_code , t.city_name FROM sys_user_bank_card t WHERE id = #{id,jdbcType=VARCHAR}</select>
	<!-- 根据主键删除记录 -->
	<delete id="del" parameterType="com.info.web.pojo.cspojo.SysUserBankCard">DELETE FROM sys_user_bank_card WHERE id = #{id,jdbcType=VARCHAR}</delete>
</mapper>
