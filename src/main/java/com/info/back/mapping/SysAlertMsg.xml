<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!--      
	This file is automatically generated by autoCode(https://git.oschina.net/durcframework/autoCode)
-->
<mapper namespace="com.info.back.dao.ISysAlertMsgDao">
	<select id="findAllCount"  parameterType="HashMap" resultType="Integer">
		select count(1) from sys_alert_msg m
		<where>
			1=1
		 	<if test="status!=null and status!=''">
		 		AND m.`status`=#{status}
		 	</if>
		 	<if test="beginTime !=null and beginTime !=''">
		    		<![CDATA[	and DATE_FORMAT(m.`create_date`,'%Y-%m-%d') >=  #{beginTime}  ]]>
			</if>
			<if test="endTime !=null and endTime !=''">
			    	<![CDATA[	and DATE_FORMAT(m.`create_date`,'%Y-%m-%d') <=  #{endTime}  ]]>
			</if>
		 	ORDER BY m.status ASC ,m.`create_date` DESC
		 </where>
	</select>
	<select id="findAll" resultType="com.info.web.pojo.cspojo.SysAlertMsg" parameterType="HashMap">
		SELECT
		 m.`id` as id,
		 m.`title` as title,
		 m.`type` as type,
		 m.`status` as status,
		 m.`create_date` as createDate,
		 m.`update_date` as updateDate,
		 m.`content` as content
		 FROM sys_alert_msg m
		 <where>
		 	1=1
		 	<if test="status!=null and status!=''">
		 		AND m.`status`=#{status}
		 	</if>
		 	<if test="beginTime !=null and beginTime !=''">
		    		<![CDATA[	and DATE_FORMAT(m.`create_date`,'%Y-%m-%d') >=  #{beginTime}  ]]>
			</if>
			<if test="endTime !=null and endTime !=''">
			    	<![CDATA[	and DATE_FORMAT(m.`create_date`,'%Y-%m-%d') <=  #{endTime}  ]]>
			</if>
		 	ORDER BY m.status ASC ,m.`create_date` DESC
		 </where>
	</select>
	<insert id="insert" parameterType="com.info.web.pojo.cspojo.SysAlertMsg">
		insert into sys_alert_msg
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="id != null">
				id,
			</if>
			<if test="title != null and title!=''">
				title,
			</if>
			<if test="content != null and content !=''">
				content,
			</if>
			<if test="type != null">
				type,
			</if>
			<if test="status != null">
				status,
			</if>
			<if test="userId != null and userId!=''">
				user_id,
			</if>
			<if test="dueDate != null">
				dueDate,
			</if>
			<if test="dealStatus != null and dealStatus!=''">
				dealStatus,
			</if>
			<if test="hasPush != null and hasPush!=''">
				hasPush,
			</if>
			<if test="businessId != null and businessId!=''">
				businessId,
			</if>
			<if test="businessNum != null and businessNum!=''">
				businessNum,
			</if>
			<if test="businessNum != null and businessNum!=''">
				businessNum,
			</if>
			<if test="createDate != null">
				create_date,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="id != null">
				#{id},
			</if>
			<if test="title != null and title!=''">
				#{title},
			</if>
			<if test="content != null and content !=''">
				#{content},
			</if>
			<if test="type != null">
				#{type},
			</if>
			<if test="status != null">
				#{status},
			</if>
			<if test="userId != null and userId!=''">
				#{userId},
			</if>
			<if test="dueDate != null">
				#{dueDate},
			</if>
			<if test="dealStatus != null and dealStatus!=''">
				#{dealStatus},
			</if>
			<if test="hasPush != null and hasPush!=''">
				#{hasPush},
			</if>
			<if test="businessId != null and businessId!=''">
				#{businessId},
			</if>
			<if test="businessNum != null and businessNum!=''">
				#{businessNum},
			</if>
			<if test="createDate != null">
				#{createDate},
			</if>
		</trim>
	</insert>
	<update id="updateTogAlertMsg"  parameterType="String">
		UPDATE sys_alert_msg m SET m.`status`=1,m.update_date=now() WHERE m.`id`=#{id}
	</update>
</mapper>
