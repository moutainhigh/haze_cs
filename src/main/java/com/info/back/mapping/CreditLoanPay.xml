<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!--      
	This file is automatically generated by autoCode(https://git.oschina.net/durcframework/autoCode)
-->
<mapper namespace="com.info.back.dao.ICreditLoanPayDao">
	<resultMap id="queryResultMap" type="com.info.web.pojo.cspojo.CreditLoanPay">
		<result column="id" property="id" jdbcType="VARCHAR"/>
		<!-- 借款Id -->
		<result column="loan_id" property="loanId" jdbcType="VARCHAR"/>
		<!-- 起始日 -->
		<result column="receivable_startdate" property="receivableStartdate" jdbcType="TIMESTAMP"/>
		<!-- 应还日期 -->
		<result column="receivable_date" property="receivableDate" jdbcType="TIMESTAMP"/>
		<!-- 应还金额 -->
		<result column="receivable_money" property="receivableMoney" jdbcType="DECIMAL"/>
		<!-- 剩余应还本金 -->
		<result column="receivable_principle" property="receivablePrinciple" jdbcType="DECIMAL"/>
		<!-- 剩余应还罚息 -->
		<result column="receivable_interest" property="receivableInterest" jdbcType="DECIMAL"/>
		<!-- 实收金额 -->
		<result column="real_money" property="realMoney" jdbcType="DECIMAL"/>
		<!-- 实收本金 -->
		<result column="realget_principle" property="realgetPrinciple" jdbcType="DECIMAL"/>
		<!-- 实收罚息 -->
		<result column="realget_interest" property="realgetInterest" jdbcType="DECIMAL"/>
		<!-- 还款状态（3，4，5，6，7对应S1，S2，M1-M2，M2-M3，M3+对应1-10,11-30（1），1个月-2个月，2个月-3个月，3个月+） -->
		<result column="status" property="status" jdbcType="INTEGER"/>
		<!-- 创建时间 -->
		<result column="create_date" property="createDate" jdbcType="TIMESTAMP"/>
		<!-- 最后更新时间 -->
		<result column="update_Date" property="updateDate" jdbcType="TIMESTAMP"/>
		<!-- 待收本金（这里不用） -->
		<result column="rest_principle" property="restPrinciple" jdbcType="DECIMAL"/>
		<!-- 分期方式（这里不用） -->
		<result column="installmentMethod" property="installmentMethod" jdbcType="INTEGER"/>
		<!-- （这里不用） -->
		<result column="create_By" property="createBy" jdbcType="VARCHAR"/>
		<!-- （这里不用） -->
		<result column="update_By" property="updateBy" jdbcType="VARCHAR"/>
	</resultMap>
	<!-- 保存,保存不为NULL的字段 -->
	<insert id="saveNotNull" parameterType="com.info.web.pojo.cspojo.CreditLoanPay">
		<selectKey keyProperty="id" resultType="java.lang.String"
			order="BEFORE">
			select replace(uuid(),'-','') from dual
		</selectKey>
		INSERT INTO credit_loan_pay 
		<trim prefix="(" suffix=")" suffixOverrides=","> 
			`id`,
			<if test="loanId != null">`loan_id`,</if>  
			<if test="receivableStartdate != null">`receivable_startdate`,</if>  
			<if test="receivableDate != null">`receivable_date`,</if>  
			<if test="receivableMoney != null">`receivable_money`,</if>  
			<if test="receivablePrinciple != null">`receivable_principle`,</if>  
			<if test="receivableInterest != null">`receivable_interest`,</if>  
			<if test="realMoney != null">`real_money`,</if>  
			<if test="realgetPrinciple != null">`realget_principle`,</if>  
			<if test="realgetInterest != null">`realget_interest`,</if>  
			<if test="status != null">`status`,</if>  
			<if test="createDate != null">`create_date`,</if>  
			<if test="updateDate != null">`update_Date`,</if>  
			<if test="restPrinciple != null">`rest_principle`,</if>  
			<if test="installmentMethod != null">`installmentMethod`,</if>  
			<if test="createBy != null">`create_By`,</if>  
			<if test="updateBy != null">`update_By`,</if> 
		</trim>  
		<trim prefix="values (" suffix=")" suffixOverrides=","> 
			#{id,jdbcType=VARCHAR},  
			<if test="loanId != null">#{loanId,jdbcType=VARCHAR},</if>  
			<if test="receivableStartdate != null">#{receivableStartdate,jdbcType=TIMESTAMP},</if>  
			<if test="receivableDate != null">#{receivableDate,jdbcType=TIMESTAMP},</if>  
			<if test="receivableMoney != null">#{receivableMoney,jdbcType=DECIMAL},</if>  
			<if test="receivablePrinciple != null">#{receivablePrinciple,jdbcType=DECIMAL},</if>  
			<if test="receivableInterest != null">#{receivableInterest,jdbcType=DECIMAL},</if>  
			<if test="realMoney != null">#{realMoney,jdbcType=DECIMAL},</if>  
			<if test="realgetPrinciple != null">#{realgetPrinciple,jdbcType=DECIMAL},</if>  
			<if test="realgetInterest != null">#{realgetInterest,jdbcType=DECIMAL},</if>  
			<if test="status != null">#{status,jdbcType=INTEGER},</if>  
			<if test="createDate != null">#{createDate,jdbcType=TIMESTAMP},</if>  
			<if test="updateDate != null">#{updateDate,jdbcType=TIMESTAMP},</if>  
			<if test="restPrinciple != null">#{restPrinciple,jdbcType=DECIMAL},</if>  
			<if test="installmentMethod != null">#{installmentMethod,jdbcType=INTEGER},</if>  
			<if test="createBy != null">#{createBy,jdbcType=VARCHAR},</if>  
			<if test="updateBy != null">#{updateBy,jdbcType=VARCHAR},</if> 
		</trim> 
	</insert>
	<!-- 更新不为NULL的字段 -->
	<update id="updateNotNull" parameterType="com.info.web.pojo.cspojo.CreditLoanPay">UPDATE credit_loan_pay
		<set> 
			<if test="loanId != null">loan_id=#{loanId,jdbcType=VARCHAR},</if>  
			<if test="receivableStartdate != null">receivable_startdate=#{receivableStartdate,jdbcType=TIMESTAMP},</if>  
			<if test="receivableDate != null">receivable_date=#{receivableDate,jdbcType=TIMESTAMP},</if>  
			<if test="receivableMoney != null">receivable_money=#{receivableMoney,jdbcType=DECIMAL},</if>  
			<if test="receivablePrinciple != null">receivable_principle=#{receivablePrinciple,jdbcType=DECIMAL},</if>  
			<if test="receivableInterest != null">receivable_interest=#{receivableInterest,jdbcType=DECIMAL},</if>  
			<if test="realMoney != null">real_money=#{realMoney,jdbcType=DECIMAL},</if>  
			<if test="realgetPrinciple != null">realget_principle=#{realgetPrinciple,jdbcType=DECIMAL},</if>  
			<if test="realgetInterest != null">realget_interest=#{realgetInterest,jdbcType=DECIMAL},</if>  
			<if test="status != null">status=#{status,jdbcType=INTEGER},</if>  
			<if test="createDate != null">create_date=#{createDate,jdbcType=TIMESTAMP},</if>  
			<if test="updateDate != null">update_Date=#{updateDate,jdbcType=TIMESTAMP},</if>  
			<if test="restPrinciple != null">rest_principle=#{restPrinciple,jdbcType=DECIMAL},</if>  
			<if test="installmentMethod != null">installmentMethod=#{installmentMethod,jdbcType=INTEGER},</if>  
			<if test="createBy != null">create_By=#{createBy,jdbcType=VARCHAR},</if>  
			<if test="updateBy != null">update_By=#{updateBy,jdbcType=VARCHAR},</if> 
		</set> WHERE loanId = #{id,jdbcType=VARCHAR}
	</update>
	<!-- 根据主键获取单条记录 -->
	<select id="get" resultMap="queryResultMap" parameterType="com.info.web.pojo.cspojo.CreditLoanPay">SELECT t.id , t.loan_id , t.receivable_startdate , t.receivable_date , t.receivable_money , t.receivable_principle , t.receivable_interest , t.real_money , t.realget_principle , t.realget_interest , t.status , t.create_date , t.update_Date , t.rest_principle , t.installmentMethod , t.create_By , t.update_By FROM credit_loan_pay t WHERE id = #{id,jdbcType=VARCHAR}</select>
	<!-- 根据主键删除记录 -->
	<delete id="del" parameterType="com.info.web.pojo.cspojo.CreditLoanPay">DELETE FROM credit_loan_pay WHERE id = #{id,jdbcType=VARCHAR}</delete>
	
	
	<select id="findByLoanId" parameterType="java.lang.String" resultType="com.info.web.pojo.cspojo.CreditLoanPay">
		SELECT
			a.id as id,
			a.loan_id as loanId,
			a.receivable_startdate as receivableStartdate,
			a.receivable_date as receivableDate,
			a.receivable_money as receivableMoney,
			a.receivable_principle as receivablePrinciple,
			a.receivable_interest as receivableInterest,
			a.realget_principle as realgetPrinciple,
			a.realget_interest as realgetInterest,
			a.real_money as realMoney,
			a.rest_principle as restPrinciple,
			a.status as status,
			a.installmentMethod as installmentMethod,
			a.create_date as createDate,
			a.update_date as updateDate
		FROM credit_loan_pay a
		WHERE a.loan_id = #{loanId}
	</select>
	
	
	<!-- 保存,保存不为NULL的字段 -->
	<insert id="insertCreditLoanPay" parameterType="com.info.web.pojo.cspojo.CreditLoanPay">
		INSERT INTO credit_loan_pay 
		<trim prefix="(" suffix=")" suffixOverrides=","> 
			<if test="id != null">`id`,</if>  
			<if test="loanId != null">`loan_id`,</if>  
			<if test="receivableStartdate != null">`receivable_startdate`,</if>  
			<if test="receivableDate != null">`receivable_date`,</if>  
			<if test="receivableMoney != null">`receivable_money`,</if>  
			<if test="receivablePrinciple != null">`receivable_principle`,</if>  
			<if test="receivableInterest != null">`receivable_interest`,</if>  
			<if test="realMoney != null">`real_money`,</if>  
			<if test="realgetPrinciple != null">`realget_principle`,</if>  
			<if test="realgetInterest != null">`realget_interest`,</if>  
			<if test="status != null">`status`,</if>  
			<if test="createDate != null">`create_date`,</if>  
			<if test="updateDate != null">`update_Date`,</if>  
			<if test="restPrinciple != null">`rest_principle`,</if>  
			<if test="installmentMethod != null">`installmentMethod`,</if>  
			<if test="createBy != null">`create_By`,</if>  
			<if test="updateBy != null">`update_By`,</if> 
		</trim>  
		<trim>
			<if test="id != null">#{id},</if>  
			<if test="loanId != null">#{loanId},</if>  
			<if test="receivableStartdate != null">#{receivableStartdate},</if>  
			<if test="receivableDate != null">#{receivableDate},</if>  
			<if test="receivableMoney != null">#{receivableMoney},</if>  
			<if test="receivablePrinciple != null">#{receivablePrinciple},</if>  
			<if test="receivableInterest != null">#{receivableInterest},</if>  
			<if test="realMoney != null">#{realMoney},</if>  
			<if test="realgetPrinciple != null">#{realgetPrinciple},</if>  
			<if test="realgetInterest != null">#{realgetInterest},</if>  
			<if test="status != null">#{status},</if>  
			<if test="createDate != null">#{createDate},</if>  
			<if test="updateDate != null">#{updateDate},</if>  
			<if test="restPrinciple != null">#{restPrinciple},</if>  
			<if test="installmentMethod != null">#{installmentMethod},</if>  
			<if test="createBy != null">#{createBy},</if>  
			<if test="updateBy != null">#{updateBy},</if> 
		</trim> 
	</insert>
	<!-- 更新不为NULL的字段 -->
	<update id="updateCreditLoanPay" parameterType="com.info.web.pojo.cspojo.CreditLoanPay">UPDATE credit_loan_pay
		<set> 
			<if test="loanId != null">loan_id=#{loanId},</if>  
			<if test="receivableStartdate != null">receivable_startdate=#{receivableStartdate},</if>  
			<if test="receivableDate != null">receivable_date=#{receivableDate},</if>  
			<if test="receivableMoney != null">receivable_money=#{receivableMoney},</if>  
			<if test="receivablePrinciple != null">receivable_principle=#{receivablePrinciple},</if>  
			<if test="receivableInterest != null">receivable_interest=#{receivableInterest},</if>  
			<if test="realMoney != null">real_money=#{realMoney},</if>  
			<if test="realgetPrinciple != null">realget_principle=#{realgetPrinciple},</if>  
			<if test="realgetInterest != null">realget_interest=#{realgetInterest},</if> 
			<if test="reductionMoney != null">reduction_money = reduction_money + #{reductionMoney},</if>  
			<if test="status != null">status=#{status},</if>  
			<if test="createDate != null">create_date=#{createDate},</if>  
			<if test="updateDate != null">update_Date=#{updateDate},</if>  
			<if test="restPrinciple != null">rest_principle=#{restPrinciple},</if>  
			<if test="installmentMethod != null">installmentMethod=#{installmentMethod},</if>  
			<if test="createBy != null">create_By=#{createBy},</if>  
			<if test="updateBy != null">update_By=#{updateBy},</if> 
		</set> WHERE id = #{id}
	</update>

<!-- 根据主键获取单条记录 -->
	<select id="findcount" resultType="int">SELECT count(id) FROM credit_loan_pay where  loanId = #{id,jdbcType=VARCHAR}</select>
</mapper>
